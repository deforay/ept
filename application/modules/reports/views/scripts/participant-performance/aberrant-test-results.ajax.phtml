<?php 
// Zend_Debug::dump($this->result);die;
?>
<script>

Highcharts.chart('aberraantContainer', {
    rangeSelector: {
        selected: 1
    },
    scrollbar: {
        barBackgroundColor: 'gray',
        barBorderRadius: 7,
        barBorderWidth: 0,
        buttonBackgroundColor: 'gray',
        buttonBorderWidth: 0,
        buttonBorderRadius: 7,
        trackBackgroundColor: 'none',
        trackBorderWidth: 1,
        trackBorderRadius: 8,
        trackBorderColor: '#CCC'
    },
    scrollbar: {
        enabled: true
    },
    title: {
        text: 'Aberrant Test Results'
    },
    xAxis: {
        categories: [<?php echo implode(",",$this->result['failed']['institute_name']);?>],
        labels: {
            overflow: 'justify'
        }
    },
    yAxis: [{ // Primary yAxis
        labels: {
            formatter: function() {
                return this.value +'';
            },
            style: {
                
            }
        },
        title: {
            text: 'Aberrant Test Count',
            style: {
                color: '#89A54E'
            }
        },
        min: 0, 
        max: 100,
        tickInterval: 5,
        opposite: true

    }],
    credits: {
        enabled: false
    },
    tooltip: {
        borderRadius: 2,
        borderWidth: 1,
        borderColor: '#999',
        shadow: false,
        shared: true,
        useHTML: true,
        yDecimals: 0,
        valueDecimale: 0,
        headerFormat: '<table class="tip"><caption><b>{point.key}</b></caption>'+'<tbody>',
        pointFormat: '<tr><td>{series.name}:</td>'+'<td style="text-align:right">{point.y}%</td></tr>',
        footerFormat: '</tbody></table>'
    },
    labels: {
        items: [{
            html: 'Total Pass / Fail Report',
            style: {
                left: '50px',
                top: '18px',
                color: ( // theme
                    Highcharts.defaultOptions.title.style &&
                    Highcharts.defaultOptions.title.style.color
                ) || 'black'
            }
        }]
    },
    series: [
        {
            type: 'column',
            name: 'Before Due Date',
            data: [<?php echo implode(",",$this->result['failed']['beforeDueDate']);?>]
        }, {
            type: 'column',
            name: 'After Due Date',
            data: [<?php echo implode(",",$this->result['failed']['afterDueDate']);?>]
        }, {
        type: 'pie',
        name: 'Total Pass / Fail Report',
        data: [{
            name: 'Failed',
            y: <?php echo $this->result['fail_percentage'];?>,
            color: Highcharts.getOptions().colors[0] // Jane's color
        }, {
            name: 'Passed',
            y: <?php echo $this->result['pass_percentage'];?>,
            color: Highcharts.getOptions().colors[1] // John's color
        }],
        center: [100, 80],
        size: 100,
        showInLegend: false,
        dataLabels: {
            enabled: false
        }
    }]
});
</script>