
<?php
$labPerform = isset($this->result) ? $this->result : array();
//  echo '<pre>';print_r($labPerform); die;
?>
<table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered table-hover dataTable no-footer" id="labPerformanceTable" role="grid" aria-describedby="labPerformanceTable_info">
    <caption><h5>Laboratory Performance per Shipment</h5></caption>

    <?php if(!empty($labPerform)){ ?>
    <tr>
        <th rowspan="2">RATING PER<br>SHIPMENT</th>
        
        <?php foreach($labPerform as $shipmentCode => $results): ?>
            <th colspan="2"><?php echo htmlspecialchars($shipmentCode); ?></th>
        <?php endforeach; ?>
    </tr>

    <tr>
        <?php foreach($labPerform as $shipmentCode => $results): ?>
        <th>No.</th>
        <th>%</th>
        <?php endforeach; ?>
    </tr>
 <tr>
    <td>EXCELLENT</td>
    <?php foreach($labPerform as $shipmentCode => $data): ?>
        <td>
            <?php
            echo $data['Excellent'];
            
            ?>
        </td>
        <td>
            <?php
            echo $data['Excellent_Percentage'];
            ?>
        </td>
    <?php endforeach; ?>
</tr>
<?php
if(array_key_exists('Satisfactory', $labPerform[array_key_first($labPerform)])):
?>
 <tr>
    <td>SATISFACTORY</td>
    <?php foreach($labPerform as $shipmentCode => $data): ?>
        <td>
            <?php
            echo $data['Satisfactory'];
            
            ?>
        </td>
        <td>
            <?php

            echo $data['Satisfactory_Percentage'];
            ?>
        </td>
    <?php endforeach; ?>
</tr>
<?php
endif;
?>
 <tr>
    <td>UNSATISFACTORY</td>
    <?php foreach($labPerform as $shipmentCode => $data): ?>
        <td>
            <?php
            echo $data['Unsatisfactory'];
            
            ?>
        </td>
        <td>
            <?php

            echo $data['Unsatisfactory_Percentage'];
            ?>
        </td>
    <?php endforeach; ?>
</tr>
  <?php }  else {
   echo "<tr><td colspan='100%' style='text-align:center;'>No data available</td></tr>";

  }?>
</table>
