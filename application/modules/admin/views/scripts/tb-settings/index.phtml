<?php
$tb = $this->tbConfig ?? [];
$genderHelper = $this->getHelper('DateFormat');
$dtFormat =  $genderHelper->getDateFormat();
?>
<style>
    .modal-backdrop.in {
        z-index: -1 !important;
    }
</style>
<div class="well">
    <form name="tbSettingsForm" id="tbSettingsForm" method="post" action="<?php echo $this->url(array("module" => "admin", "controller" => "tb-settings", "action" => "index"), 'default', true) ?>" class="form-horizontal" role="form">
        <fieldset>
            <legend><?= $this->translate->_("TB Settings"); ?>
                <!-- <a href="javascript:void(0);" onclick="exportConfig('tbSettingsForm', 'tb');" class="btn btn-sm btn-success" style="float:right;margin-right: 10px;"><i class="eyeicon icon-download"></i>&nbsp;&nbsp;<?= $this->translate->_("Export Config"); ?></a> -->
            </legend>
            <div class="row">
                <div class="col-md-6">
                    <label for="tbPassPercentage" class="control-label"><?= $this->translate->_("Passing Score"); ?> <span class="mandatory">*</span></label>
                    <input type="number" id="tbPassPercentage" name="tb[passPercentage]" max="100" class="isRequired isNumeric form-control" placeholder="95" value="<?php echo $tb['passPercentage'] ?? 95; ?>" />
                </div>
                <div class="col-md-6">
                    <label for="reportVersion" class="control-label"><?= $this->translate->_("Report Version"); ?></label>
                    <input type="text" id="reportVersion" name="tb[reportVersion]" class="form-control" placeholder="Enter the report version" value="<?php echo $tb['reportVersion'] ?? null; ?>" title="Please enter the report version" />
                </div>
                <div class="col-md-6">
                    <label for="reportEffectiveDate" class="control-label"><?= $this->translate->_("Report Effective Date"); ?></label>
                    <input type="text" id="reportEffectiveDate" name="tb[reportEffectiveDate]" class="form-control datepicker" placeholder="Select the report effective date" title="<?= $this->translate->_('Please select the report effective date'); ?>" value="<?php echo $tb['reportEffectiveDate'] ?? null; ?>" />
                    <small class="text-muted"><?= $this->translate->_("Please select the report effective date that shows in the report PDF footer."); ?></small>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <label for="contactInfo" class="control-label"><?= $this->translate->_("Contact Information Content"); ?><span class="mandatory">*</span></label>
                    <div id="contactInfoEditor" name="contactInfoEditor" class="richtextarea form-control" title="Please enter a Contact Information Content" placeholder="Enter the Contact Information Content"><?php echo htmlspecialchars_decode($tb['contactInfo']); ?></div>
                    <textarea style="display:none;" id="contactInfo" name="tb[contactInfo]"></textarea>
                </div>
            </div>
            <div id="respond" style="margin: 0px auto 0px auto; text-align: center;" align="center">
                <input name="submitbtn" class="btn btn-primary" type="button" onclick="validateNow();return false;" tabindex="7" value="<?= $this->translate->_("Update"); ?>" />
                <input class="btn btn-danger" type="button" onclick="window.location.href='/admin/index';" tabindex="8" value="<?= $this->translate->_("Back"); ?>" />
            </div>
        </fieldset>
    </form>
</div>

<!-- include summernote css/js -->
<link rel="stylesheet" type="text/css" href="<?php echo $this->baseUrl('css/summernote.min.css'); ?>">
<script type="text/javascript" src="<?php echo $this->baseUrl('js/summernote.min.js'); ?>"></script>

<script type="text/javascript">
    function validateNow() {

        $("#contactInfo").val($("#contactInfoEditor").summernote('code'));
        flag = deforayValidator.init({
            formId: 'tbSettingsForm'
        });
        if (flag) {
            $.blockUI();
            document.getElementById('tbSettingsForm').submit();
        }
    }
    $(document).ready(function() {
        $('#contactInfoEditor').summernote({
            placeholder: 'Please enter the Contact Information here',
            tabsize: 2,
            height: 200
        });
    });
</script>