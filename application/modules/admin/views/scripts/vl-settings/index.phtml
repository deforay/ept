<?php
$vl = $this->vlConfig ?? [];
$genderHelper = $this->getHelper('DateFormat');
$dtFormat =  $genderHelper->getDateFormat();
?>
<style>
    /* Main container styling */
    .dts-settings-container {
        background: #fff;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
        padding: 0;
        margin-bottom: 80px;
    }

    /* Legend/Header styling */
    .dts-settings-container legend {
        background: linear-gradient(135deg, #4a6fa5 0%, #3a5a8a 100%);
        color: #fff;
        font-weight: 500;
        font-size: 16px;
        padding: 14px 20px;
        margin: 0;
        border: none;
        border-radius: 8px 8px 0 0;
    }

    .dts-settings-container legend i {
        margin-right: 8px;
    }

    /* Form content area */
    .form-content {
        padding: 25px;
        background-color: #f8fafc;
        border: 1px solid #e2e8f0;
        border-top: none;
        border-radius: 0 0 8px 8px;
    }

    /* Section styling */
    .config-section {
        background: #fff;
        border: 1px solid #e2e8f0;
        border-radius: 6px;
        padding: 20px;
        margin-bottom: 20px;
    }

    .config-section:hover {
        border-color: #4a6fa5;
        box-shadow: 0 2px 8px rgba(74, 111, 165, 0.1);
    }

    .config-section h5 {
        color: #4a6fa5;
        font-weight: 600;
        margin-top: 0;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 2px solid #4a6fa5;
    }

    .config-section h5 i {
        margin-right: 8px;
    }

    /* Row spacing */
    .config-section .row {
        margin-bottom: 20px;
    }

    .config-section .row:last-child {
        margin-bottom: 0;
    }

    /* Label styling */
    .config-section label,
    .form-content label {
        color: #374151;
        font-weight: 500;
        margin-bottom: 8px;
        display: block;
    }

    /* Form control styling */
    .config-section .form-control:focus {
        border-color: #4a6fa5;
        box-shadow: 0 0 0 3px rgba(74, 111, 165, 0.1);
    }

    /* Radio button styling */
    .radioBtn .notActive {
        color: #4a6fa5;
        background-color: #fff;
        border-color: #4a6fa5;
    }

    .radioBtn .active {
        background-color: #4a6fa5;
        border-color: #3a5a8a;
    }

    /* Floating action buttons */
    .floating-buttons {
        position: fixed;
        bottom: 20px;
        right: 30px;
        z-index: 1000;
        display: flex;
        gap: 10px;
        background: #fff;
        padding: 15px 20px;
        border-radius: 8px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
        border: 1px solid #e2e8f0;
    }

    .floating-buttons .btn {
        padding: 10px 25px;
        font-size: 14px;
    }

    /* Small/muted text */
    .text-muted {
        color: #6b7280;
        font-size: 12px;
        margin-top: 5px;
    }

    /* Alert/Note styling */
    .alert-note {
        background-color: #fef3c7;
        border: 1px solid #f59e0b;
        border-left: 4px solid #f59e0b;
        color: #92400e;
        border-radius: 6px;
        padding: 15px;
        margin-bottom: 20px;
    }

    .alert-note ul {
        margin-bottom: 0;
        padding-left: 20px;
    }

    .alert-note li {
        margin-bottom: 5px;
    }

    .alert-note li:last-child {
        margin-bottom: 0;
    }

    /* Testkit selection section */
    .testkit-section {
        background: #f8fafc;
        border: 1px solid #e2e8f0;
        border-radius: 6px;
        padding: 20px;
        margin-bottom: 15px;
    }

    .testkit-section h6 {
        color: #374151;
        font-weight: 600;
        margin-bottom: 15px;
        padding-bottom: 8px;
        border-bottom: 1px solid #e2e8f0;
    }

    .testkit-row {
        margin-bottom: 15px;
    }

    .testkit-row:last-child {
        margin-bottom: 0;
    }

    /* Input group addon styling */
    .input-group-addon {
        background: linear-gradient(135deg, #4a6fa5 0%, #3a5a8a 100%);
        color: #fff;
        border-color: #3a5a8a;
    }

    /* Horizontal rule */
    hr {
        border: none;
        border-top: 1px solid #e2e8f0;
        margin: 25px 0;
    }

    /* Sub-section titles */
    .subsection-title {
        color: #4a6fa5;
        font-weight: 600;
        font-size: 15px;
        margin-bottom: 15px;
        padding-bottom: 8px;
        border-bottom: 2px solid #4a6fa5;
    }

    .subsection-title i {
        margin-right: 8px;
    }
</style>
<div class="well">
    <form name="vlSettingsForm" id="vlSettingsForm" method="post" action="<?php echo $this->url(array("module" => "admin", "controller" => "vl-settings", "action" => "index"), 'default', true) ?>" class="form-horizontal" role="form">
        <fieldset>
            <legend><?= $this->translate->_("VL Settings"); ?>
                <!-- <a href="javascript:void(0);" onclick="exportConfig('vlSettingsForm', 'vl');" class="btn btn-sm btn-success" style="float:right;margin-right: 10px;"><i class="eyeicon icon-download"></i>&nbsp;&nbsp;<?= $this->translate->_("Export Config"); ?></a> -->
            </legend>
            <div class="row">
                <div class="col-md-6">
                    <label for="vlPassPercentage" class="control-label"><?= $this->translate->_("Passing Score"); ?> <span class="mandatory">*</span></label>
                    <input type="number" id="vlPassPercentage" name="vl[passPercentage]" max="100" class="isRequired isNumeric form-control" placeholder="95" value="<?php echo $vl['passPercentage'] ?? 95; ?>" />
                </div>
                <div class="col-md-6">
                    <label for="vlDocumentationScore" class="control-label"><?= $this->translate->_("Documentation Score"); ?> <span class="mandatory">*</span></label>
                    <input type="number" id="vlDocumentationScore" name="vl[documentationScore]" max="100" class="isRequired isNumeric form-control" placeholder="95" value="<?php echo $vl['documentationScore'] ?? 95; ?>" />
                </div>
                <div class="col-md-6">
                    <label for="reportVersion" class="control-label"><?= $this->translate->_("Report Version"); ?></label>
                    <input type="text" id="reportVersion" name="vl[reportVersion]" class="form-control" placeholder="Enter the report version" value="<?php echo $vl['reportVersion'] ?? null; ?>" title="Please enter the report version" />
                    <small class="text-muted"><?= $this->translate->_("Please enter the report version that shows in the report PDF footer."); ?></small>
                </div>
                <div class="col-md-6">
                    <label for="reportEffectiveDate" class="control-label"><?= $this->translate->_("Report Effective Date"); ?></label>
                    <input type="text" id="reportEffectiveDate" name="vl[reportEffectiveDate]" class="form-control datepicker" placeholder="Select the report effective date" title="<?= $this->translate->_('Please select the report effective date'); ?>" value="<?php echo $vl['reportEffectiveDate'] ?? null; ?>" />
                    <small class="text-muted"><?= $this->translate->_("Please select the report effective date that shows in the report PDF footer."); ?></small>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <label for="contentForIndividualVlReports" class="control-label"><?= $this->translate->_("Contact Information Content"); ?><span class="mandatory">*</span></label>
                    <div id="content" name="content" class="richtextarea form-control" title="Please enter content for individual VL reports" placeholder="Enter content for individual VL reports"><?php echo htmlspecialchars_decode($vl['contentForIndividualVlReports']); ?></div>
                    <textarea style="display: none;" id="contentForIndividualVlReports" class="form-control" name="vl[contentForIndividualVlReports]" placeholder="Enter content for individual VL reports" title="Please enter content for individual VL reports"></textarea>
                </div>
            </div>
            <div id="respond" style="margin: 0px auto 0px auto; text-align: center;" align="center">
                <input name="submitbtn" class="btn btn-primary" type="button" onclick="validateNow();return false;" tabindex="7" value="<?= $this->translate->_("Update"); ?>" />
                <input class="btn btn-danger" type="button" onclick="window.location.href='/admin/index';" tabindex="8" value="<?= $this->translate->_("Back"); ?>" />
            </div>
        </fieldset>
    </form>
</div>

<!-- include summernote css/js -->
<link rel="stylesheet" type="text/css" href="<?php echo $this->baseUrl('css/summernote.min.css'); ?>">
<script type="text/javascript" src="<?php echo $this->baseUrl('js/summernote.min.js'); ?>"></script>
<script type="text/javascript">
    function validateNow() {
        $("#contentForIndividualVlReports").val($("#content").summernote('code'));
        flag = deforayValidator.init({
            formId: 'vlSettingsForm'
        });
        if (flag) {
            $.blockUI();
            document.getElementById('vlSettingsForm').submit();
        }
    }
    $(document).ready(function() {
        $('#content').summernote({
            placeholder: 'Please enter content for individual VL reports',
            tabsize: 2,
            height: 200
        });
        $(".datepicker").datepicker({
            dateFormat: '<?php echo $dtFormat; ?>',
            // minDate: 'today',
        });
    });
</script>